import{m as v,b as p,c as h,e as S,g as r,w as c,f as m,j as l,Q as _}from"./index-74898ef0.js";import x from"./HorizontalTree-ead67847.js";import F from"./EditableForm1-2fd3e9dc.js";import P from"./EditableForm2-a029d757.js";import{_ as V}from"./index-a749ebb9.js";import"./index-02cc34dd.js";import"./index-a7f52bc9.js";import"./eagerComputed-a29f2f4d.js";import"./useBreakpoint-a031231d.js";const E={components:{"a-table":V,HorizontalTree:x,EditableForm1:F,EditableForm2:P},data(){return{enpv:0,risk:0,discountRate:.08,dataSource1:[{key:"0",uncertainty:"投资",value:3500,probability:.15,start_year:1,end_year:3},{key:"1",uncertainty:"投资",value:3300,probability:.7,start_year:1,end_year:3},{key:"2",uncertainty:"投资",value:3e3,probability:.15,start_year:1,end_year:3},{key:"3",uncertainty:"年经营成本",value:1100,probability:.3,start_year:4,end_year:13},{key:"4",uncertainty:"年经营成本",value:1e3,probability:.4,start_year:4,end_year:13},{key:"5",uncertainty:"年经营成本",value:900,probability:.3,start_year:4,end_year:13},{key:"6",uncertainty:"年销售收入",value:3300,probability:.3,start_year:4,end_year:13},{key:"7",uncertainty:"年销售收入",value:3e3,probability:.5,start_year:4,end_year:13},{key:"8",uncertainty:"年销售收入",value:2700,probability:.2,start_year:4,end_year:13}],columns1:[{title:"不确定因素",dataIndex:"uncertainty",slots:{customRender:"uncertainty"}},{title:"取值（万元）",dataIndex:"value",slots:{customRender:"value"}},{title:"概率",dataIndex:"probability",slots:{customRender:"probability"}},{title:"开始年份",dataIndex:"start_year",slots:{customRender:"start_year"}},{title:"结束年份",dataIndex:"end_year",slots:{customRender:"end_year"}},{title:"操作",dataIndex:"operation",slots:{customRender:"operation"}}],dataSource2:[{key:"0",uncertainty:"投资",value:void 0,probability:.15},{key:"1",uncertainty:"投资",value:void 0,probability:.7},{key:"2",uncertainty:"投资",value:void 0,probability:.15},{key:"3",uncertainty:"年经营成本",value:void 0,probability:.3},{key:"4",uncertainty:"年经营成本",value:void 0,probability:.4},{key:"5",uncertainty:"年经营成本",value:void 0,probability:.3},{key:"6",uncertainty:"年销售收入",value:void 0,probability:.3},{key:"7",uncertainty:"年销售收入",value:void 0,probability:.5},{key:"8",uncertainty:"年销售收入",value:void 0,probability:.2}],columns2:[{title:"不确定因素",dataIndex:"uncertainty",slots:{customRender:"uncertainty"}},{title:"现值（万元）",dataIndex:"value",slots:{customRender:"value"}},{title:"概率",dataIndex:"probability",slots:{customRender:"probability"}},{title:"操作",dataIndex:"operation",slots:{customRender:"operation"}}],dataSource3:[],columns3:[{title:"净现值（万元）",dataIndex:"netValue",slots:{customRender:"netValue"}},{title:"概率",dataIndex:"probability",slots:{customRender:"probability"}},{title:"加权净现值",dataIndex:"weightedNetPresentValue",slots:{customRender:"weightedNetPresentValue"}},{title:"操作",dataIndex:"operation",slots:{customRender:"operation"}}],dataSource4:[],columns4:[{title:"投资现值",dataIndex:"investmentPresentValue",slots:{customRender:"investmentPresentValue"}},{title:"投资概率",dataIndex:"investmentProbability",slots:{customRender:"investmentProbability"}},{title:"年成本现值",dataIndex:"annualCostPresentValue",slots:{customRender:"annualCostPresentValue"}},{title:"成本概率",dataIndex:"costProbability",slots:{customRender:"costProbability"}},{title:"年收入现值",dataIndex:"annualRevenuePresentValue",slots:{customRender:"annualRevenuePresentValue"}},{title:"收入概率",dataIndex:"revenueProbability",slots:{customRender:"revenueProbability"}},{title:"期望净现值",dataIndex:"expectedNetPresentValue",slots:{customRender:"expectedNetPresentValue"}},{title:"概率",dataIndex:"probability",slots:{customRender:"probability"}}],dataSource5:[{key:"0",netValue:-1116,probability:.05,cumulativeProbability:.05}],columns5:[{title:"净现值",dataIndex:"netValue",slots:{customRender:"netValue"}},{title:"概率",dataIndex:"probability",slots:{customRender:"probability"}},{title:"累计概率",dataIndex:"cumulativeProbability",slots:{customRender:"cumulativeProbability"}},{title:"操作",dataIndex:"operation",slots:{customRender:"operation"}}]}},mounted(){this.calculateDataSource3(),this.calculateDataSource4()},methods:{presentValueOfAnnuity(t,u,o){const e=(1-Math.pow(1+u,-o))/u;return t*e},presentValueOfFutureValue(t,u,o){const e=1/Math.pow(1+u,o);return t*e},calculateDataSource3(){const t={};for(const e of this.dataSource1)t[e.uncertainty]||(t[e.uncertainty]=[]),t[e.uncertainty].push(e);const u=Object.keys(t);let o=1;for(let e=0;e<u.length;e++)o*=t[u[e]].length;for(let e=0;e<o;e++)this.dataSource3.push({netValue:void 0,probability:void 0,weightedNetPresentValue:void 0})},calculateDataSource4(){for(;this.dataSource4.length;)this.dataSource4.pop();const t=this.dataSource1.filter(e=>e.uncertainty==="投资"),u=this.dataSource1.filter(e=>e.uncertainty==="年经营成本"),o=this.dataSource1.filter(e=>e.uncertainty==="年销售收入");for(let e=0;e<t.length;e++)for(let a=0;a<u.length;a++)for(let n=0;n<o.length;n++){let i=this.presentValueOfFutureValue(this.presentValueOfAnnuity(u[a].value,this.discountRate,u[e].end_year-u[e].start_year+1),this.discountRate,t[e].end_year-t[e].start_year),s=this.presentValueOfFutureValue(this.presentValueOfAnnuity(o[a].value,this.discountRate,o[e].end_year-o[e].start_year+1),this.discountRate,t[e].end_year-t[e].start_year);this.dataSource4.push({investmentPresentValue:t[e].value,investmentProbability:t[e].probability,annualCostPresentValue:i.toFixed(2),costProbability:u[a].probability,annualRevenuePresentValue:s.toFixed(2),revenueProbability:o[n].probability,expectedNetPresentValue:(s*o[n].probability-i*u[a].probability-t[e].value*t[e].probability).toFixed(2),probability:(t[e].probability*u[a].probability*o[n].probability).toFixed(2)})}console.log(this.dataSource4)},handleDataSource1Update(t){console.log("parent watch dataSource1 change"),this.dataSource1=t,this.calculateDataSource3(),this.calculateDataSource4()},handleDataSource2Update(t){console.log("parent watch dataSource2 change"),this.dataSource2=t},handleDataSource3Update(t){console.log("parent watch dataSource3 change"),this.dataSource3=t},handleDataSource4Update(t){console.log("parent watch dataSource4 change"),this.dataSource4=t},handleDataSource5Update(t){console.log("parent watch dataSource5 change"),this.dataSource5=t}}},R={class:"container"},f=m("p",null,"Notice：改动表一将清空表三的数据，修改表四的数据！",-1);function C(t,u,o,e,a,n){const i=p("EditableForm1"),s=p("HorizontalTree"),d=p("EditableForm2"),b=_;return h(),S("div",R,[f,r(i,{dataSource:a.dataSource1,columns:a.columns1,onUpdateData:n.handleDataSource1Update},{default:c(()=>[l("一、基础经济数据表")]),_:1},8,["dataSource","columns","onUpdateData"]),r(s,{dataSource:a.dataSource1},null,8,["dataSource"]),r(d,{dataSource:a.dataSource2,columns:a.columns2,onUpdateData:n.handleDataSource2Update},{default:c(()=>[l("二、现值和净现值序列决策树图")]),_:1},8,["dataSource","columns","onUpdateData"]),r(s,{dataSource:a.dataSource2},null,8,["dataSource"]),r(d,{dataSource:a.dataSource3,columns:a.columns3,onUpdateData:n.handleDataSource3Update},{default:c(()=>[l("三、净现值计算表格")]),_:1},8,["dataSource","columns","onUpdateData"]),r(d,{dataSource:a.dataSource4,columns:a.columns4,onUpdateData:n.handleDataSource4Update},{default:c(()=>[l("四、净现值计算表格（参考）")]),_:1},8,["dataSource","columns","onUpdateData"]),r(i,{dataSource:a.dataSource5,columns:a.columns5,onUpdateData:n.handleDataSource5Update},{default:c(()=>[l("五、净现值与其累计概率表")]),_:1},8,["dataSource","columns","onUpdateData"]),m("div",null,[l(" 本项目的期望净现值(ENPV)为 "),r(b,{value:a.enpv,"onUpdate:value":u[0]||(u[0]=y=>a.enpv=y),allowClear:"",style:{width:"10%"}},null,8,["value"]),l("万元， 但是存在净现值小于零的可能性为 "),r(b,{value:a.risk,"onUpdate:value":u[1]||(u[1]=y=>a.risk=y),allowClear:"",style:{width:"10%"}},null,8,["value"]),l("%的风险。 ")])])}const O=v(E,[["render",C]]);export{O as default};
//# sourceMappingURL=index-920ed813.js.map
