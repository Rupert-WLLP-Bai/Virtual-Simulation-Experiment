{"version":3,"file":"EditableCell-a8da30c3.js","sources":["../../src/components/editable-cell/EditableCell.vue"],"sourcesContent":["<script lang=\"ts\" setup>\r\n  import { computed, nextTick, PropType, ref, toRefs } from 'vue';\r\n\r\n  export type AntInputType =\r\n    | 'input'\r\n    | 'textarea'\r\n    | 'radio'\r\n    | 'timePicker'\r\n    | 'datePicker'\r\n    | 'rangePicker'\r\n    | 'select'\r\n    | 'mention'\r\n    | 'rate'\r\n    | 'upload'\r\n    | 'treeSelect'\r\n    | 'transfer'\r\n    | 'checkbox'\r\n    | 'cascader'\r\n    | 'autoComplete'\r\n    | 'inputNumber'\r\n    | 'slider'\r\n    | 'switch';\r\n\r\n  const emit = defineEmits<{\r\n    (e: 'update:edit', edit: boolean): void;\r\n    (e: 'update:value', value: any): void;\r\n    (e: 'pressEnter', event: KeyboardEvent): void;\r\n  }>();\r\n  const props = defineProps({\r\n    value: [String, Number, Boolean, Object],\r\n    edit: {\r\n      type: Boolean,\r\n      default: null,\r\n    },\r\n    editOnClick: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    type: {\r\n      type: String as PropType<AntInputType>,\r\n      default: 'input',\r\n      validator(val: string) {\r\n        return [\r\n          'input',\r\n          'radio',\r\n          'timePicker',\r\n          'datePicker',\r\n          'rangePicker',\r\n          'select',\r\n          'mention',\r\n          'rate',\r\n          'upload',\r\n          'treeSelect',\r\n          'transfer',\r\n          'checkbox',\r\n          'cascader',\r\n          'autoComplete',\r\n          'inputNumber',\r\n          'slider',\r\n          'switch',\r\n          'textarea',\r\n        ].includes(val);\r\n      },\r\n    },\r\n    options: Object,\r\n  });\r\n\r\n  const { type } = toRefs(props);\r\n\r\n  const component = computed(() => {\r\n    const _type = type.value;\r\n    return 'A' + _type.substring(0, 1).toUpperCase() + _type.substring(1);\r\n  });\r\n\r\n  const cacheEdit = ref(false);\r\n\r\n  const _edit = computed({\r\n    get() {\r\n      if (props.edit !== null) {\r\n        cacheEdit.value = props.edit;\r\n      }\r\n      return props.edit ?? cacheEdit.value;\r\n    },\r\n    set(val) {\r\n      cacheEdit.value = val;\r\n      emit('update:edit', val);\r\n    },\r\n  });\r\n\r\n  const input = ref();\r\n\r\n  function editCell() {\r\n    if (props.editOnClick) {\r\n      _edit.value = true;\r\n      nextTick(() => input.value?.focus());\r\n    }\r\n  }\r\n\r\n  function complete() {\r\n    _edit.value = false;\r\n  }\r\n\r\n  const cacheVal: any = ref(null);\r\n  const _value = computed({\r\n    get() {\r\n      if (props.value !== undefined) {\r\n        cacheVal.value = props.value;\r\n      }\r\n      return props.value ?? cacheVal.value;\r\n    },\r\n    set(val) {\r\n      cacheVal.value = val;\r\n      emit('update:value', val);\r\n    },\r\n  });\r\n</script>\r\n<template>\r\n  <slot v-if=\"_edit\" class=\"editable-cell-input\" name=\"input\">\r\n    <component\r\n      ref=\"input\"\r\n      @keyup.enter=\"complete\"\r\n      @blur=\"complete\"\r\n      v-model:value=\"_value\"\r\n      class=\"editable-cell-input-component\"\r\n      v-bind=\"options\"\r\n      :is=\"component\"\r\n    />\r\n  </slot>\r\n  <div v-else @click=\"editCell\" class=\"editable-cell-show\">\r\n    <slot>\r\n      {{ value }}\r\n    </slot>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n  .editable-cell {\r\n    &-input {\r\n      &-component {\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"],"names":["type","toRefs","props","component","computed","_type","cacheEdit","ref","_edit","val","emit","input","editCell","nextTick","_a","complete","cacheVal","_value"],"mappings":"wpBAmEE,CAAA,KAAAA,CAAA,EAAAC,EAAAC,CAAA,EAEAC,EAAAC,EAAA,IAAA,CACE,MAAAC,EAAAL,EAAA,MACA,MAAA,IAAAK,EAAA,UAAA,EAAA,CAAA,EAAA,cAAAA,EAAA,UAAA,CAAA,CAAoE,CAAA,EAGtEC,EAAAC,EAAA,EAAA,EAEAC,EAAAJ,EAAA,CAAuB,KAAA,CAEnB,OAAAF,EAAA,OAAA,OACEI,EAAA,MAAAJ,EAAA,MAEFA,EAAA,MAAAI,EAAA,KAA+B,EACjC,IAAAG,EAAA,CAEEH,EAAA,MAAAG,EACAC,EAAA,cAAAD,CAAA,CAAuB,CACzB,CAAA,EAGFE,EAAAJ,IAEA,SAAAK,GAAA,CACEV,EAAA,cACEM,EAAA,MAAA,GACAK,EAAA,IAAA,OAAA,OAAAC,EAAAH,EAAA,QAAA,YAAAG,EAAA,QAAA,EACF,CAGF,SAAAC,GAAA,CACEP,EAAA,MAAA,EAAc,CAGhB,MAAAQ,EAAAT,EAAA,IAAA,EACAU,EAAAb,EAAA,CAAwB,KAAA,CAEpB,OAAAF,EAAA,QAAA,SACEc,EAAA,MAAAd,EAAA,OAEFA,EAAA,OAAAc,EAAA,KAA+B,EACjC,IAAAP,EAAA,CAEEO,EAAA,MAAAP,EACAC,EAAA,eAAAD,CAAA,CAAwB,CAC1B,CAAA"}