import{bU as k,m as g,c as i,e as r,f as s,B as C,g as p,bV as v,h as S,w as c,k as x,F,j as B,t as E,Q as K}from"./index-74898ef0.js";import{_}from"./index-a749ebb9.js";import"./index-02cc34dd.js";import{_ as V}from"./index-a7f52bc9.js";import"./eagerComputed-a29f2f4d.js";import"./useBreakpoint-a031231d.js";const j={components:{"a-table":_},props:{dataSource:{type:Array,required:!0},columns:{type:Array,required:!0}},data(){return{editingKey:"",editableData:{},dataSourceCopy:this.dataSource}},methods:{update(){this.$emit("updateData",this.dataSourceCopy)},edit(e){this.editableData[e]=k(this.dataSourceCopy.filter(n=>e===n.key)[0]),this.editingKey=e,this.update()},save(e){Object.assign(this.dataSourceCopy.filter(n=>e===n.key)[0],this.editableData[e]),delete this.editableData[e],this.editingKey="",this.update()},cancel(e){delete this.editableData[e],this.editingKey="",this.update()},handleDataSourceChange(e){const n=this.columns.map(o=>o.dataIndex);this.dataSourceCopy=e.map((o,m)=>Object.fromEntries(n.map(a=>[a,o[a]]))),this.update()}}},w={class:"container"},A={class:"editable-row-operations"},I={key:0},N=["onClick"],U=s("a",null,"取消",-1),q={key:1},O=["onClick"];function L(e,n,o,m,a,u){const h=K,y=V,D=_;return i(),r("div",w,[s("h1",null,[C(e.$slots,"default")]),p(D,{columns:o.columns,pagination:!1,"data-source":a.dataSourceCopy,bordered:""},v({operation:c(({record:t})=>[s("div",A,[a.editableData[t.key]?(i(),r("span",I,[s("a",{onClick:l=>u.save(t.key),style:{margin:"10px"}},"保存",8,N),p(y,{title:"确定取消保存吗？",onConfirm:l=>u.cancel(t.key)},{default:c(()=>[U]),_:2},1032,["onConfirm"])])):(i(),r("span",q,[s("a",{onClick:l=>u.edit(t.key),style:{margin:"10px"}},"编辑",8,O)]))])]),_:2},[S(o.columns.map(t=>t.dataIndex).filter(t=>t!="operation"),(t,l)=>({name:t,fn:c(({text:f,record:d})=>[s("div",null,[a.editableData[d.key]?(i(),x(h,{key:0,value:a.editableData[d.key][t],"onUpdate:value":b=>a.editableData[d.key][t]=b,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(i(),r(F,{key:1},[B(E(f),1)],64))])])}))]),1032,["columns","data-source"])])}const M=g(j,[["render",L]]);export{M as default};
//# sourceMappingURL=EditableForm2-a029d757.js.map
